{"version":3,"sources":["assets/images/help_center.png","assets/images/qrcode.jpg","utils/util.js","utils/env.js","utils/request.js","api/index.js","view/secret/components/layout.js","utils/recorder.js","view/secret/components/writeForm.js","view/secret/components/previewForm.js","view/secret/cache.js","view/secret/write.js","view/secret/check.js","view/secret/check_detail.js","view/secret/helpCenter.js","view/secret/success.js","view/secret/components/previewRecordForm.js","view/secret/components/recordForm.js","view/secret/record.js","routes/index.js","serviceWorker.js","utils/wx.js","index.js","assets/images/check_top_bg.jpg"],"names":["module","exports","__webpack_require__","p","parseTime","time","cFormat","date","format","replace","length","parseInt","Date","formatObj","y","getFullYear","m","getMonth","d","getDate","h","getHours","i","getMinutes","s","getSeconds","a","getDay","result","key","value","queryUrlParam","str","name","reg","RegExp","indexOf","r","split","match","setLocal","window","localStorage","setItem","getLocal","getItem","removeLocal","removeItem","isWeiXin","staticHost2ApiHost","localhost","location","hostname","noToast","pending","cancelToken","axios","CancelToken","removePending","config","u","url","method","f","splice","service","create","baseURL","params","interceptors","request","use","toast_default","loading","c","push","error","Promise","reject","response","res","data","hide","code","info","msg","message","getSecret","mobile","updateRecord","id","saveSecret","uploadAudio","file","headers","Content-Type","uploadImage","getCodeUrl","getBgUrl","getWxConfig","valid","_default","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","token","_this2","search","returnPath","props","history","setState","getAuth","getToken","then","setTimeout","catch","e","pathname","redirectUri","encodeURIComponent","concat","react_default","createElement","routes","map","route","index","react_router","exact","path","render","component","assign","React","Component","Recorder","source","cfg","bufferLen","numChannels","mimeType","recording","callbacks","getBuffer","exportWAV","context","node","createScriptProcessor","createJavaScriptNode","onaudioprocess","buffer","channel","inputBuffer","getChannelData","worker","postMessage","command","connect","destination","InlineWorker","sampleRate","recLength","recBuffers","initBuffers","mergeBuffers","Float32Array","offset","set","writeString","view","string","setUint8","charCodeAt","onmessage","record","type","interleaved","buffers","inputL","inputR","inputIndex","interleave","dataview","samples","ArrayBuffer","DataView","setUint32","setUint16","output","input","Math","max","min","setInt16","floatTo16BitPCM","encodeWAV","audioBlob","Blob","cb","pop","createClass","callback","Error","blob","filename","URL","webkitURL","createObjectURL","link","document","href","download","click","createEvent","initEvent","dispatchEvent","alert","modal_default","wx","WriteForm","comonRecord","_this$state","audioStatus","recorder","clearTimeout","timer","func","_this$state2","startAudio","setInterval","limitTime","clearInterval","stopRecording","text","onPress","clear","audio_context","AudioContext","webkitAudioContext","navigator","getUserMedia","webkitGetUserMedia","mediaDevices","audio","stream","startUserMedia","JSON","stringify","form","getFieldsValue","reload","wxRecord","onChange","files","formData","FormData","append","setImageFile","createMediaStreamSource","stop","setAudioUrl","_this3","_this$state3","startRecord","success","stopRecord","localId","fail","_this4","_this$state4","getFieldProps","_this$props$formData","say_to_you","_this$props$formData$","username","order_code","captcha_val","captcha_url","filterTime","className","list_default","renderHeader","onClick","textarea_item_default","rows","initialValue","rules","required","image_picker_default","onImageClick","fs","previewImg","selectable","multiple","input_item_default","placeholder","src","createForm","PreviewForm","playCommonAudio","getElementById","volume","audioPlayStatus","play","pause","playWxAudio","wxAudioLocalId","playVoice","pauseVoice","playAudio","getAudioLinkStatus","addAudioListenner","previewFlag","previewImgArr","previewImgIndex","wx_audio_link","audioLinkStatus","onVoicePlayEnd","addEventListener","_this$props$formData2","_this$props$formData3","created_at","audioUrl","imgUrl","cacheData","WriteSecre","bgUrl","rel_image","previewClose","formSubmit","values","wechat_token","imgFileId","thumb","captcha_key","codeKey","haveCommit","uploadVoice","isShowProgressTips","wx_audio","serverId","uploadModal","audioBlod","previewResult","writeForm","validateFields","force","errors","x","objectSpread","havePreview","resultPreviewFlag","returnEdit","returnUpdate","codeLock","img","myCacheData","visible","transparent","maskClosable","onClose","title","footer","dist_default","urls","previewForm","previwe","wrappedComponentRef","button_default","CheckSecre","check_status","secretInfo","sessionStorage","onSubmit","phone","toString","getInfo","gotoHelpCenter","rel_audio","rel_thumb","downloadVoice","checkModal","check_bg_top","size","parse","Base64","decode","HelpCenter","helpImage","Success","result_default","icon_default","style","fill","qrcode","disabled","codeUrl","flag","recordId","previewRecordForm","recordForm","redirect","helpCenter","layout","writeSecret","checkSecret","checkSecretDetail","isLocalhost","Boolean","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","_res$data","appId","timestamp","nonceStr","signature","debug","jsApiList","initWxConfig","ReactDom","react_router_dom","to","querySelector","process","origin","fetch","contentType","get","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.725ceca1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/help_center.70cd0aea.png\";","module.exports = __webpack_public_path__ + \"static/media/qrcode.a8404a67.jpg\";","//格式化时间\nconst parseTime = (time, cFormat) => {\n  const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}'\n  let date\n  if (typeof time === 'object') {\n    date = time\n  } else {\n    time = time.replace(/-/g, '/')\n    if (('' + time).length === 10) time = parseInt(time) * 1000\n    date = new Date(time)\n  }\n  const formatObj = {\n    y: date.getFullYear(),\n    m: date.getMonth() + 1,\n    d: date.getDate(),\n    h: date.getHours(),\n    i: date.getMinutes(),\n    s: date.getSeconds(),\n    a: date.getDay()\n  }\n  const time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\n    let value = formatObj[key]\n    // Note: getDay() returns 0 on Sunday\n    if (key === 'a') { return ['日', '一', '二', '三', '四', '五', '六'][value] }\n    if (result.length > 0 && value < 10) {\n      value = '0' + value\n    }\n    return value || 0\n  })\n  return time_str\n}\n/**\n* 获取queryString*\n*/\nconst queryUrlParam = (str, name) => {\n  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n  if (str.indexOf('?') >= 0) {\n    var r = str.split(\"?\")[1].match(reg);\n    if (r != null) return (r[2]);\n    return null;\n  }\n  return null;\n}\n\n\n/**\n * 本地储存\n * @param {*} key \n * @param {*} value \n */\nconst setLocal = (key, value) => {\n  return window.localStorage.setItem(key, value)\n}\n\n/**\n * 获取本地储存\n * @param {*} key \n */\nconst getLocal = (key) => {\n  return window.localStorage.getItem(key)\n}\n\n/**\n * 移除某个本地储存\n * @param {*} key \n */\nconst removeLocal = (key) => {\n  return window.localStorage.removeItem(key)\n}\n\n\n\n//判断是否是微信浏览器的函数\nconst isWeiXin = () => {\n  //window.navigator.userAgent属性包含了浏览器类型、版本、操作系统类型、浏览器引擎类型等信息，这个属性可以用来判断浏览器类型\n  // let ua = window.navigator.userAgent.toLowerCase();\n  // if (ua.match(/MicroMessenger/i) == 'micromessenger') {// 通过正则表达式匹配ua中是否含有MicroMessenger字符串\n  //   return true;\n  // } else {\n  //   return false;\n  // }\n  //限制只能微信打开\n  return true\n}\n\n\nexport {\n  parseTime,\n  queryUrlParam,\n  setLocal,\n  getLocal,\n  removeLocal,\n  isWeiXin\n}","export function staticHost2ApiHost() {\n    var mHost = window.location.hostname\n    return {\n        'localhost': 'https://symy.powerionics.cn',\n    }[mHost] || 'https://symy.powerionics.cn'\n}","import axios from 'axios'\nimport { staticHost2ApiHost } from './env'\nimport { Toast } from 'antd-mobile';\n// axios.defaults.withCredentials = true;\nlet noToast = false;\nlet pending = []; //声明一个数组用于存储每个ajax请求的取消函数和ajax标识\nlet cancelToken = axios.CancelToken;\nlet removePending = (config) => {\n    for(let p in pending){\n        if(pending[p].u == config.url + '&' + config.method) { //当当前请求在数组中存在时执行函数体\n            pending[p].f(); //执行取消操作\n            pending.splice(p, 1); //把这条记录从数组中移除\n        }\n    }\n}\n// 创建axios实例\nconst service = axios.create({\n  baseURL: staticHost2ApiHost(), // api 的 base_url\n  // timeout: 5000, // 请求超时时间\n  // headers: {\n  //   'Content-Type': 'application/json',\n  //   'X-Requested-With': 'XMLHttpRequest',\n  // },\n  params: {}\n})\n// request拦截器\nservice.interceptors.request.use(\n  config => {\n    if(config.params&&config.params.noToast){\n      noToast = true;\n    }else{\n      noToast = false;\n    }\n    Toast.loading('', 0)\n    removePending(config); //在一个ajax发送前执行一下取消操作\n    config.cancelToken = new cancelToken((c)=>{\n        // 这里的ajax标识我是用请求地址&请求方式拼接的字符串，当然你可以选择其他的一些方式\n        pending.push({ u: config.url + '&' + config.method, f: c });  \n    });\n    if(config.params){\n      delete config.params.noToast\n    }\n    return config\n  },\n  error => {\n    Promise.reject(error)\n  }\n)\n\n// response 拦截器\nservice.interceptors.response.use(\n  response => {\n    let res = response.data;\n    Toast.hide()\n    removePending(response.config);  //在一个ajax响应后再执行一下取消操作，把已经完成的请求从pending中移除\n    if (res.code != 0) {\n      if(!noToast){\n        if(res.data && typeof res.data == 'string'){\n          Toast.info(res.msg+':'+res.data,2)\n        }else{\n          Toast.info(res.msg,2)\n        }\n      }\n      return Promise.reject(res)\n    } else {\n      return response.data\n    }\n  },\n  error => {\n    Toast.hide()\n    if(!noToast){\n      Toast.info(error.message,2)\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n","import request from '@/utils/request'\n\nconst getSecret = (mobile) => {\n  return request({\n    url: '/api/speech/info-mobile',\n    method: 'get',\n    params: {\n      mobile,\n      noToast:true\n    }\n  })\n}\n\n\nconst updateRecord = (id,data) => {\n  return request({\n    url: '/api/speech/'+id,\n    method: 'put',\n    data\n  })\n}\n\nconst saveSecret = (data) => {\n  return request({\n    url: '/api/speech',\n    method: 'post',\n    data\n  })\n}\n\n\n/**\n * 上传语音\n * @param {*} data \n */\nconst uploadAudio = (file) => {\n  return request({\n    url: '/static/ueditor/1.4.3.3/php/controller.php?action=uploadvideo',\n    method: 'post',\n    headers: { 'Content-Type': 'multipart/form-data' },\n    data: file\n  })\n}\n\n/**\n * 上传图片\n * @param {*} file \n */\nconst uploadImage = (file) => {\n  return request({\n    url: '/static/ueditor/1.4.3.3/php/controller.php?action=uploadimage',\n    method: 'post',\n    headers: { 'Content-Type': 'multipart/form-data' },\n    data: file\n  })\n}\n\n\n\n/**\n * 获取验证码\n */\nconst getCodeUrl = () => {\n  return request({\n    url: '/captcha/api',\n    method: 'get'\n  })\n}\n\n\n\n/**\n * 获取背景图片\n */\nconst getBgUrl = () => {\n  return request({\n    url: '/api/back-image',\n    method: 'get'\n  })\n}\n\n\n/**\n * 获取token\n */\nconst getToken = (code) => {\n  return request({\n    url: '/api/wechat-token',\n    method: 'get',\n    params:{\n      code,\n      noToast:true\n    }\n  })\n}\n\nconst getWxConfig = (url) => {\n  return request({\n    url: '/api/wechat-jssdk-config',\n    method: 'get',\n    params:{\n      url\n    }\n  })\n}\n\nconst valid = (data) => {\n  return request({\n    url: '/api/speech/pre-valid',\n    method: 'post',\n    data\n  })\n}\n\n\n\nexport {\n  valid,\n  getSecret,\n  saveSecret,\n  uploadAudio,\n  uploadImage,\n  getCodeUrl,\n  getBgUrl,\n  getToken,\n  getWxConfig,\n  updateRecord\n}","import React from 'react'\nimport { Icon } from 'antd-mobile'\nimport { Route } from 'react-router-dom'\nimport { queryUrlParam, getLocal, isWeiXin, setLocal } from '@/utils/util'\nimport { getToken } from '@/api'\nimport '../styles/layout.scss'\nimport '../styles/form.scss'\n\nexport default class extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            token:''\n        }\n    }\n    componentWillMount() {\n        let code = queryUrlParam(window.location.search, 'code');\n        let returnPath = queryUrlParam(window.location.search, 'returnPath');\n        let bgUrl = queryUrlParam(this.props.history.location.search, 'bg');\n\n        if (!bgUrl) {\n            if (isWeiXin()) {\n                //微信浏览器需要跳转授权获取code\n                let token = getLocal('_secret_wx_token')\n                if (!token) {\n                    if (!code) {\n                        this.getAuth()\n                        return;\n                    } else {\n                        getToken(code).then(res => {\n                            token = res.data\n                            if(token){\n                                setLocal('_secret_wx_token', token)\n                            }\n                            setTimeout(() => {\n                                this.props.history.replace(returnPath)\n                                this.setState({\n                                    token:'have_token'\n                                })\n                            }, 100)\n                        }).catch(e => {\n                            setTimeout(() => {\n                                this.props.history.replace(returnPath)\n                                this.setState({\n                                    token:'no_token'\n                                })\n                            }, 100)\n                        })\n                    }\n                } else {\n                    this.setState({\n                        token:'haveToken'\n                    })\n                    this.props.history.replace(returnPath)\n                }\n            } else {\n                this.props.history.replace('/powerionics/write')\n            }\n        }\n\n    }\n    getAuth() {\n        let appid = 'wx3edc25d22618f5e9';\n        // appid = 'wx77dc39692260dd64';\n        let returnPath = this.props.location.pathname\n        let redirectUri = encodeURIComponent('https://symy.powerionics.cn/secret/?returnPath=' + returnPath);\n\n        // let paramsCode = queryUrlParam(window.location.search, 'code');\n        // let code = sessionStorage.getItem('code')\n        // if (!paramsCode && !code) {\n        let url = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appid}&redirect_uri=${redirectUri}&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect`\n        window.location.replace(url)\n        // } else if(!code){\n        //     sessionStorage.setItem('code', paramsCode)\n        //     window.history.back()\n        // }\n    }\n    render() {\n        let {token} = this.state\n        return token ? <div id=\"secret-wrap\">\n            {\n                this.props.routes.map((route, index) => {\n                    return <Route key={index} exact={route.exact} path={route.path} render={props => (\n                        <route.component {...props} routes={route.routes} />\n                    )} ></Route>\n                })\n            }\n        </div> : null\n    }\n}","import InlineWorker from 'inline-worker';\n\nexport class Recorder {\n    config = {\n        bufferLen: 4096,\n        numChannels: 2,\n        mimeType: 'audio/wav'\n    };\n\n    recording = false;\n\n    callbacks = {\n        getBuffer: [],\n        exportWAV: []\n    };\n\n    constructor(source, cfg) {\n        Object.assign(this.config, cfg);\n        this.context = source.context;\n        this.node = (this.context.createScriptProcessor ||\n        this.context.createJavaScriptNode).call(this.context,\n            this.config.bufferLen, this.config.numChannels, this.config.numChannels);\n\n        this.node.onaudioprocess = (e) => {\n            if (!this.recording) return;\n\n            var buffer = [];\n            for (var channel = 0; channel < this.config.numChannels; channel++) {\n                buffer.push(e.inputBuffer.getChannelData(channel));\n            }\n            this.worker.postMessage({\n                command: 'record',\n                buffer: buffer\n            });\n        };\n\n        source.connect(this.node);\n        this.node.connect(this.context.destination);    //this should not be necessary\n\n        let self = {};\n        this.worker = new InlineWorker(function () {\n            let recLength = 0,\n                recBuffers = [],\n                sampleRate,\n                numChannels;\n\n            this.onmessage = function (e) {\n                switch (e.data.command) {\n                    case 'init':\n                        init(e.data.config);\n                        break;\n                    case 'record':\n                        record(e.data.buffer);\n                        break;\n                    case 'exportWAV':\n                        exportWAV(e.data.type);\n                        break;\n                    case 'getBuffer':\n                        getBuffer();\n                        break;\n                    case 'clear':\n                        clear();\n                        break;\n                }\n            };\n\n            function init(config) {\n                sampleRate = config.sampleRate;\n                numChannels = config.numChannels;\n                initBuffers();\n            }\n\n            function record(inputBuffer) {\n                for (var channel = 0; channel < numChannels; channel++) {\n                    recBuffers[channel].push(inputBuffer[channel]);\n                }\n                recLength += inputBuffer[0].length;\n            }\n\n            function exportWAV(type) {\n                let buffers = [];\n                for (let channel = 0; channel < numChannels; channel++) {\n                    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n                }\n                let interleaved;\n                if (numChannels === 2) {\n                    interleaved = interleave(buffers[0], buffers[1]);\n                } else {\n                    interleaved = buffers[0];\n                }\n                let dataview = encodeWAV(interleaved);\n                let audioBlob = new Blob([dataview], {type: type});\n\n                this.postMessage({command: 'exportWAV', data: audioBlob});\n            }\n\n            function getBuffer() {\n                let buffers = [];\n                for (let channel = 0; channel < numChannels; channel++) {\n                    buffers.push(mergeBuffers(recBuffers[channel], recLength));\n                }\n                this.postMessage({command: 'getBuffer', data: buffers});\n            }\n\n            function clear() {\n                recLength = 0;\n                recBuffers = [];\n                initBuffers();\n            }\n\n            function initBuffers() {\n                for (let channel = 0; channel < numChannels; channel++) {\n                    recBuffers[channel] = [];\n                }\n            }\n\n            function mergeBuffers(recBuffers, recLength) {\n                let result = new Float32Array(recLength);\n                let offset = 0;\n                for (let i = 0; i < recBuffers.length; i++) {\n                    result.set(recBuffers[i], offset);\n                    offset += recBuffers[i].length;\n                }\n                return result;\n            }\n\n            function interleave(inputL, inputR) {\n                let length = inputL.length + inputR.length;\n                let result = new Float32Array(length);\n\n                let index = 0,\n                    inputIndex = 0;\n\n                while (index < length) {\n                    result[index++] = inputL[inputIndex];\n                    result[index++] = inputR[inputIndex];\n                    inputIndex++;\n                }\n                return result;\n            }\n\n            function floatTo16BitPCM(output, offset, input) {\n                for (let i = 0; i < input.length; i++, offset += 2) {\n                    let s = Math.max(-1, Math.min(1, input[i]));\n                    output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n                }\n            }\n\n            function writeString(view, offset, string) {\n                for (let i = 0; i < string.length; i++) {\n                    view.setUint8(offset + i, string.charCodeAt(i));\n                }\n            }\n\n            function encodeWAV(samples) {\n                let buffer = new ArrayBuffer(44 + samples.length * 2);\n                let view = new DataView(buffer);\n\n                /* RIFF identifier */\n                writeString(view, 0, 'RIFF');\n                /* RIFF chunk length */\n                view.setUint32(4, 36 + samples.length * 2, true);\n                /* RIFF type */\n                writeString(view, 8, 'WAVE');\n                /* format chunk identifier */\n                writeString(view, 12, 'fmt ');\n                /* format chunk length */\n                view.setUint32(16, 16, true);\n                /* sample format (raw) */\n                view.setUint16(20, 1, true);\n                /* channel count */\n                view.setUint16(22, numChannels, true);\n                /* sample rate */\n                view.setUint32(24, sampleRate, true);\n                /* byte rate (sample rate * block align) */\n                view.setUint32(28, sampleRate * 4, true);\n                /* block align (channel count * bytes per sample) */\n                view.setUint16(32, numChannels * 2, true);\n                /* bits per sample */\n                view.setUint16(34, 16, true);\n                /* data chunk identifier */\n                writeString(view, 36, 'data');\n                /* data chunk length */\n                view.setUint32(40, samples.length * 2, true);\n\n                floatTo16BitPCM(view, 44, samples);\n\n                return view;\n            }\n        }, self);\n\n        this.worker.postMessage({\n            command: 'init',\n            config: {\n                sampleRate: this.context.sampleRate,\n                numChannels: this.config.numChannels\n            }\n        });\n\n        this.worker.onmessage = (e) => {\n            let cb = this.callbacks[e.data.command].pop();\n            if (typeof cb == 'function') {\n                cb(e.data.data);\n            }\n        };\n    }\n\n\n    record() {\n        this.recording = true;\n    }\n\n    stop() {\n        this.recording = false;\n    }\n\n    clear() {\n        this.worker.postMessage({command: 'clear'});\n    }\n\n    getBuffer(cb) {\n        cb = cb || this.config.callback;\n        if (!cb) throw new Error('Callback not set');\n\n        this.callbacks.getBuffer.push(cb);\n\n        this.worker.postMessage({command: 'getBuffer'});\n    }\n\n    exportWAV(cb, mimeType) {\n        mimeType = mimeType || this.config.mimeType;\n        cb = cb || this.config.callback;\n        if (!cb) throw new Error('Callback not set');\n\n        this.callbacks.exportWAV.push(cb);\n\n        this.worker.postMessage({\n            command: 'exportWAV',\n            type: mimeType\n        });\n    }\n\n    static\n    forceDownload(blob, filename) {\n        let url = (window.URL || window.webkitURL).createObjectURL(blob);\n        let link = window.document.createElement('a');\n        link.href = url;\n        link.download = filename || 'output.wav';\n        let click = document.createEvent(\"Event\");\n        click.initEvent(\"click\", true, true);\n        link.dispatchEvent(click);\n    }\n}\n\nexport default Recorder;\n","import React from 'react'\nimport { Modal, List, InputItem, Toast, ImagePicker, TextareaItem, Button } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport Recorder from '@/utils/recorder';\nimport { setLocal, removeLocal, isWeiXin } from '@/utils/util'\nimport { uploadImage } from '@/api'\nconst alert = Modal.alert;\nconst wx = window.wx;//微信jssdk相关\nclass WriteForm extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            recorder: null,//h5录音用 recorder--录音对象（为了兼容h5....后面没用。移动端浏览器兼容性不好。。。。）\n            audioStatus: 0,//录音状态 0-初始化状态 1-录音中 2-录音done\n            time: 0, // 已经录音的时间\n            limitTime: 30,//录音限制时间（秒）\n        }\n    }\n\n    componentWillMount() {\n        clearTimeout(this.timer)//清除录音timer\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timer)//清除录音timer\n    }\n\n    \n    //兼容H5录音的玩意。。初始化h5录音api\n    startUserMedia(audio_context, stream, callback) {\n        let input = audio_context.createMediaStreamSource(stream);\n        this.setState({\n            recorder: new Recorder(input)\n        }, () => {\n            callback && callback()\n        })\n    }\n\n    //h5暂停录音。\n    stopRecording() {\n        let { recorder } = this.state;\n        recorder.stop();\n        //导出录音二进制\n        recorder.exportWAV((blob) => {\n            this.props.setAudioUrl(blob)\n            this.setState({\n                audioStatus: 0\n            })\n        });\n        recorder.clear();\n    }\n    //微信录音。。这家伙也有吭，，，录音的下载的id微信只帮你保存三天，过期就无效了  。所以必须通过服务端下载转为永久文件。\n    wxRecord() {\n        let { audioStatus, time, limitTime } = this.state;\n        clearTimeout(this.timer)\n        // if (time >= limitTime) {\n        //     alert('', `您的录音已经超过${limitTime}秒，是否重新录制？`, [\n        //         { text: '否', onPress: () => {}},\n        //         {\n        //             text: '是', onPress: () => {\n        //                 this.setState({\n        //                     time: 0\n        //                 }, () => {\n        //                     this.wxRecord()\n        //                 })\n        //             }\n        //         },\n        //     ])\n        // } else {\n        if (audioStatus == 0 || audioStatus == 2) {\n            //微信开始录音---这个api也有吭 不少安卓手机微信版本不是最新的 使用这个api失效\n            wx.startRecord({\n                success: () => {\n                    this.setState({\n                        audioStatus: 1,\n                        startAudio: true,\n                        time: 0\n                    })\n                    clearTimeout(this.timer)\n                    //录音timer开启\n                    this.timer = setInterval(() => {\n                        this.setState({\n                            time: this.state.time + 1\n                        }, () => {\n                            if (this.state.time >= this.state.limitTime) {\n                                clearInterval(this.timer);\n                                //时间限制到了。。终止录音\n                                wx.stopRecord({\n                                    success: (res) => {\n                                        this.setState({\n                                            audioStatus: 0\n                                        })\n                                        this.props.setAudioUrl(res.localId, 'wx')\n                                    }\n                                })\n                            }\n                        })\n                    }, 1000)\n                }\n            })\n\n        } else {\n\n            //正在录音中的时候点击就停止录音\n            clearTimeout(this.timer)\n            wx.stopRecord({\n                success: (res) => {\n                    this.setState({\n                        audioStatus: 0\n                    })\n                    this.props.setAudioUrl(res.localId, 'wx')\n                },\n                fail: (e) => {\n                }\n            })\n        }\n        // }\n    }\n\n    //h5录音。。。\n    comonRecord = () => {\n        let { audioStatus, recorder } = this.state;\n        clearTimeout(this.timer)\n        // return false;\n        const func = () => {\n            let { audioStatus, recorder } = this.state;\n            if (audioStatus == 0 || audioStatus == 2) {\n                this.setState({\n                    audioStatus: 1,\n                    time: 0,\n                    startAudio: true\n                })\n                //开始录音\n                recorder.record();\n                clearTimeout(this.timer)\n                this.timer = setInterval(() => {\n                    this.setState({\n                        time: this.state.time + 1\n                    }, () => {\n                        if (this.state.time >= this.state.limitTime) {\n                            clearInterval(this.timer);\n                            this.stopRecording()\n                        }\n                    })\n                }, 1000)\n            } else if (audioStatus == 1) {\n                this.stopRecording()\n            }\n        }\n        if (this.state.time >= this.state.limitTime) {\n\n            alert('', `您的录音已经超过${this.state.limitTime}秒，是否重新录制？`, [\n                { text: '否', onPress: () => { } },\n                {\n                    text: '是', onPress: () => {\n                        this.setState({\n                            time: 0\n                        }, () => {\n                            recorder.clear();\n                            this.record()\n                        })\n                    }\n                },\n            ])\n\n        } else {\n            //初始化h5录音 -检查api是否可用 浏览器是否兼容\n            if (audioStatus == 0 && !recorder) {\n                let audio_context = null\n                try {\n                    // webkit shim\n                    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n                    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n                    window.URL = window.URL || window.webkitURL;\n\n                    audio_context = new AudioContext;\n                    //这个api兼容性不好 建议采用iframe录音\n                    navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\n                        removeLocal('_secret_')\n                        this.startUserMedia(audio_context, stream, func)\n                    }).catch(e => {\n                        setLocal('_secret_', JSON.stringify(this.props.form.getFieldsValue()))\n                        window.location.reload();\n                    });\n                } catch (e) {\n                    Toast.info('该浏览器不支持录音,请用其他浏览器或者微信打开')\n                }\n\n            } else {\n                func()\n            }\n        }\n    }\n\n    //录音 区分h5和微信\n    record = () => {\n        if (isWeiXin()) {\n            this.wxRecord()\n        } else {\n            this.comonRecord()\n        }\n    }\n\n\n    //图片上传服务器\n    onChange = (files, type, index) => {\n        if (files.length != 0) {\n            let file = files[0].file;\n            let formData = new FormData();\n            formData.append('upfile', file)\n            uploadImage(formData).then(data => {\n                this.props.setImageFile(files, data)\n            })\n        } else {\n            this.props.setImageFile(files)\n\n        }\n    }\n\n    render() {\n        let { audioStatus, recorder, time, limitTime } = this.state\n        const { getFieldProps } = this.props.form;\n        let { say_to_you, files = [], username, order_code, mobile, captcha_val, captcha_url } = this.props.formData;\n\n        const filterTime = (time) => {\n            if (time < 10) {\n                time = '0' + time\n            }\n            return time\n        }\n\n        return (\n            <form className=\"my-form wirte-form\">\n                <List className=\"audio-list\" renderHeader={() => {\n                    return (\n                        <div className=\"audio-label-wrap\">\n                            <p className=\"label\">我想对您说：</p>\n                            <p>可选项,录制您想对TA说的话,限{limitTime}秒内!</p>\n                            {\n                                audioStatus == 1 ? <p className=\"tip\">录音中 00:{filterTime(time)}</p> : (this.state.startAudio ? <p className=\"tip\">已录音 00:{filterTime(time)}</p> : null)\n                            }\n                        </div>\n                    )\n                }}>\n                    <div className=\"audio-wrap\">\n                        <p onClick={this.record} className={audioStatus == 0 ? 'btn start' : 'btn pause'}></p>\n                    </div>\n                </List>\n                <List renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label require\">写给TA：</p>\n                            <p>填写您想对TA说的话,不限字数!</p>\n                        </div>\n                    )\n                }}>\n                    <TextareaItem\n                        rows=\"4\"\n                        {...getFieldProps('say_to_you', {\n                            initialValue: say_to_you,\n                            rules: [\n                                { required: true, message: '请输入对TA说的话' },\n                            ],\n                        })}\n                    ></TextareaItem>\n                </List>\n\n                <List className=\"no-bg bg-list\" renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label\">永恒一刻：</p>\n                            <p>选填项！上传您想分享的图片，可选择上传或不上传！</p>\n                        </div>\n                    )\n                }}>\n                    <ImagePicker\n                        files={files}\n                        onChange={this.onChange}\n                        onImageClick={(index, fs) => this.props.previewImg(fs[0].url)}\n                        selectable={files.length < 1}\n                        multiple={false}\n                    />\n                </List>\n\n                <List renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label\">送卡人姓名/昵称：</p>\n                            <p>选填项！如果您不想让对方知道是谁，可不填！</p>\n                        </div>\n                    )\n                }}>\n                    <InputItem\n                        {...getFieldProps('username', {\n                            initialValue: username\n                        })}\n                    ></InputItem>\n\n                </List>\n\n                <List renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label require\">powerionics淘宝或京东订单编号：</p>\n                            <p>可在您的淘宝京东订单内查询复制！</p>\n                        </div>\n                    )\n                }}>\n                    <InputItem\n                        {...getFieldProps('order_code', {\n                            initialValue: order_code,\n                            rules: [\n                                { required: true, message: '请输入订单编号' }\n                            ],\n                        })}\n                    ></InputItem>\n                </List>\n\n                <List renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label require\">手机号码：</p>\n                            <p className=\"danger\">必填项！请填写收卡人的手机号，此手机号即为对方查询留言的唯一密码，请核对无误！</p>\n                        </div>\n                    )\n                }}>\n                    <InputItem\n                        type=\"phone\"\n                        placeholder=\"对方手机号码\"\n                        {...getFieldProps('mobile', {\n                            initialValue: mobile,\n                            rules: [\n                                { required: true, message: '请输入对方手机号码' },\n                            ]\n                        })}\n                    ></InputItem>\n                </List>\n\n                <List className=\"no-bg\" renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label require\">验证码：</p>\n                            <p>填入右边您看到的数字</p>\n                        </div>\n                    )\n                }}>\n                    <div className=\"code-wrap\">\n                        <InputItem\n                            placeholder=\"\"\n                            {...getFieldProps('captcha_val', {\n                                initialValue: captcha_val,\n                                rules: [\n                                    { required: true, message: '请输入验证码' },\n                                ],\n                            })}\n                        ></InputItem>\n                        <div className=\"\">\n                            <img className=\"codeImg\" onClick={this.props.getCodeUrl} src={captcha_url}></img>\n                        </div>\n                    </div>\n                </List>\n            </form>\n        )\n    }\n}\n\n\nexport default createForm()(WriteForm)","import React from 'react'\nimport { createForm } from 'rc-form';\nimport { List, InputItem, ImagePicker, TextareaItem } from 'antd-mobile';\nimport { isWeiXin } from '@/utils/util'\nimport {staticHost2ApiHost} from '@/utils/env'\nconst wx = window.wx\nclass PreviewForm extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            files: [],//图片数组\n            audioPlayStatus: 0,//语音播放状态 0-初始化状态/暂停 1-播放中 2-播放done\n            previewFlag: false,//图片预览标识\n            previewImgArr: [],//预览图片数组\n            previewImgIndex: 0//预览图片index\n        }\n    }\n    //获取录音状态\n    getAudioLinkStatus() {\n        let { wx_audio_link, wxAudioLocalId } = this.props.formData;\n        if (wx_audio_link) {\n            return 2 //已转永久文件（页面播放为h5播放）\n        } else if (wxAudioLocalId) {\n            return 1 //有录音 但是还未转永久文件\n        } else {\n            return 0 //无录音\n        }\n    }\n\n    componentDidMount() {\n        this.addAudioListenner()//监听音频播放结束事件\n    }\n\n    addAudioListenner() {\n        let audioLinkStatus = this.getAudioLinkStatus();\n        if (audioLinkStatus == 1) {\n            //微信音频播放结束事件监听\n            wx.onVoicePlayEnd({\n                success: (res) => {\n                    // wx.stopVoice({\n                    //     localId: res.localId,\n                    // });\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }\n            });\n        } else if (audioLinkStatus == 2) {\n            //h5监听音频播放结束事件。。。。\n            let audio = document.getElementById('my_audio')\n            if (audio) {\n                audio.addEventListener('ended', () => {\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }, false)\n            }\n        }\n    }\n\n    playCommonAudio = () => {\n        let audio = document.getElementById('my_audio')\n        audio.volume = 1;\n        let { audioPlayStatus } = this.state\n        if (audioPlayStatus == 0) {\n            //开始播放\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        } else if (audioPlayStatus == 1) {\n            //暂停\n            this.setState({\n                audioPlayStatus: 0\n            })\n            audio.pause()\n        } else if (audioPlayStatus == 2) {\n            //重新播放\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        } else if (audioPlayStatus == 3) {\n            //重新播放\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        }\n    }\n\n    //播放暂停微信id录音\n    playWxAudio = () => {\n        let { wxAudioLocalId } = this.props.formData\n        let { audioPlayStatus } = this.state;\n        if (audioPlayStatus == 0) {\n            wx.playVoice({\n                localId: wxAudioLocalId,\n                success: () => {\n                    this.setState({\n                        audioPlayStatus: 1\n                    })\n                }\n            });\n\n        } else {\n            wx.pauseVoice({\n                localId: wxAudioLocalId,\n                success: () => {\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }\n            });\n        }\n\n    }\n    //播放录音\n    playAudio = () => {\n        if (this.getAudioLinkStatus() == 1) {\n            //如果有录音 而且录音还未转永久文件 则使用微信播放api\n            this.playWxAudio()\n        } else {\n            this.addAudioListenner()\n            this.playCommonAudio()\n        }\n    }\n\n    render() {\n        const { getFieldProps } = this.props.form;\n        let { audioPlayStatus } = this.state;\n        let { say_to_you, files = [], username, created_at, audioUrl, wxAudioLocalId, wx_audio_link } = this.props.formData;\n        let imgUrl = files && files.length != 0 ? files[0].url : ''\n        let audioLinkStatus = this.getAudioLinkStatus()\n        return (\n            <form className=\"my-form preview-form\">\n                <List className=\"audio-list\" renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label\">我想对您说：</p>\n                        </div>\n                    )\n                }}>\n                    <div>\n                        <p className=\"word-wrap\">{say_to_you}</p>\n                        {\n                            audioLinkStatus != 0 ? <div className=\"audio-wrap\">\n                                <p onClick={this.playAudio} className={(audioPlayStatus == 1 ? 'btn end' : 'btn start')}></p>\n                                {audioLinkStatus == 2 ? <audio id=\"my_audio\" src={staticHost2ApiHost()+wx_audio_link}></audio> : null}\n                            </div> : null\n                        }\n                    </div>\n                </List>\n\n                {\n                    imgUrl ? <List className=\"no-bg bg-list\" renderHeader={() => {\n                        return (\n                            <div>\n                                <p className=\"label\">永恒一刻：</p>\n                            </div>\n                        )\n                    }}>\n                        <div className=\"preview-img\"><img onClick={() => this.props.previewImg(imgUrl)} src={imgUrl}></img></div>\n                    </List> : null\n                }\n\n                {\n                    username ? <List renderHeader={() => {\n                        return (\n                            <div>\n                                <p className=\"label\">送卡人姓名/昵称：</p>\n                            </div>\n                        )\n                    }}>\n                        <InputItem\n                            {...getFieldProps('username', {\n                                initialValue: username\n                            })}\n                        ></InputItem>\n\n                    </List> : null\n                }\n\n                <List renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label\">发送时间：</p>\n                        </div>\n                    )\n                }}>\n                    <InputItem\n                        {...getFieldProps('created_at', {\n                            initialValue: created_at\n                        })}\n                    ></InputItem>\n\n                </List>\n\n\n            </form>\n        )\n    }\n}\n\n\nexport default createForm()(PreviewForm)","let cacheData = {}\n\n\nconst setCacheData = (key,val) => {\n    cacheData[key] = val\n}\n\nexport {\n    cacheData,\n    setCacheData\n}","import React from 'react'\nimport { Modal, Toast, Button } from 'antd-mobile';\nimport { getLocal, removeLocal, parseTime, queryUrlParam, isWeiXin } from '@/utils/util'\nimport { saveSecret, uploadAudio, getCodeUrl, getBgUrl, valid } from '@/api'\nimport WxImageViewer from 'react-wx-images-viewer';\nimport { staticHost2ApiHost } from '@/utils/env'\nimport WriteForm from './components/writeForm'\nimport PreviewForm from './components/previewForm'\nimport { cacheData } from './cache';\n// import { Base64 } from 'js-base64';\n\nconst wx = window.wx;\nclass WriteSecre extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      imgFileId: null,\n      previewFlag: false,\n      previewImgArr: [],\n      previewImgIndex: 0,\n      bgUrl: '',\n      formData: {},\n      audioBlod: null,\n      audioUrl: ''\n    }\n  }\n\n  componentWillMount() {\n    let bgUrl = queryUrlParam(this.props.history.location.search, 'bg');\n    if (bgUrl) {\n      this.setState({\n        bgUrl\n      })\n    } else {\n      this.getBgUrl()\n    }\n\n    this.getCodeUrl()\n\n    let myCacheData = {};\n\n    if (cacheData.formData) {\n      myCacheData = {\n        havePreview: true,\n        resultPreviewFlag: true,\n        formData: cacheData.formData\n      }\n\n    }\n    if (cacheData.returnUpdate) {\n      myCacheData.returnUpdate = true;\n    }\n    if (cacheData.haveCommit) {\n      myCacheData.haveCommit = true;\n    }\n    this.setState({\n      ...myCacheData\n    })\n  }\n\n  getBgUrl = () => {\n    getBgUrl().then(res => {\n      let data = res.data;\n      if (data && data.length != 0) {\n        let bgUrl = staticHost2ApiHost() + data[0].rel_image.path;\n        this.setState({\n          bgUrl\n        })\n      }\n    })\n  }\n\n  previewImg = (url) => {\n    this.setState({\n      previewFlag: true,\n      previewImgArr: [url],\n      previewImgIndex: 0\n    })\n  }\n\n  previewClose = () => {\n    this.setState({\n      previewFlag: false\n    })\n  }\n\n  formSubmit = () => {\n    let values = Object.assign({}, this.state.formData);\n    let token = getLocal('_secret_wx_token');\n    if (token) {\n      values.wechat_token = token\n    }\n    if (this.state.imgFileId) {\n      values.thumb = this.state.imgFileId\n    } else {\n      values.thumb = 0\n    }\n    values.mobile = values.mobile.replace(/\\s*/g, '');\n    values.captcha_key = this.state.codeKey\n    delete values.files\n    delete values.created_at\n    delete values.audioUrl\n    delete values.captcha_url\n\n    // values.say_to_you = Base64.encode(values.say_to_you)\n    // if(values.username){\n    //   values.username = Base64.encode(values.username)\n    // }\n\n    let func = (values) => {\n      cacheData.haveCommit = true;\n      this.setState({\n        haveCommit: true\n      })\n      saveSecret(values).then(res => {\n        this.props.history.push(`/success`)\n      })\n    }\n\n    if (isWeiXin()) {\n      if (this.state.wxAudioLocalId) {\n        wx.uploadVoice({\n          localId: this.state.wxAudioLocalId, // 需要上传的音频的本地ID，由stopRecord接口获得\n          isShowProgressTips: 1, // 默认为1，显示进度提示\n          success: (res) => {\n            values.wx_audio = res.serverId; // 返回音频的服务器端ID\n            values.audio = 0\n            func(values)\n          },\n          fail: (res) => {\n            this.setState({ uploadModal: true })\n          }\n        });\n      } else {\n        values.audio = 0\n        func(values)\n      }\n    } else {\n      if (this.state.audioBlod) {\n        let formData = new FormData();\n        formData.append('upfile', this.state.audioBlod, 'test.wav')\n        uploadAudio(formData).then(data => {\n          values.audio = data.id\n          func(values)\n        })\n      } else {\n        values.audio = 0\n        func(values)\n      }\n    }\n\n\n  }\n\n  previewResult = () => {\n    this.writeForm.props.form.validateFields({ force: true }, (errors, values) => {\n      if (!errors) {\n        // values = Object.assign({}, this.state.formData);\n        let formData = Object.assign({}, this.state.formData, { ...values, created_at: parseTime(new Date()), audioUrl: this.state.audioUrl, wxAudioLocalId: this.state.wxAudioLocalId })\n        values = Object.assign({}, formData);\n        let token = getLocal('_secret_wx_token');\n        if (token) {\n          values.wechat_token = token\n        }\n        if (this.state.imgFileId) {\n          values.thumb = this.state.imgFileId\n        } else {\n          values.thumb = 0\n        }\n        values.mobile = values.mobile.replace(/\\s*/g, '');\n        values.captcha_key = this.state.codeKey\n        delete values.files\n        delete values.created_at\n        delete values.audioUrl\n        delete values.captcha_url\n\n\n        let func = (values) => {\n          valid(values).then(res => {\n            cacheData.formData = formData\n            this.setState({\n              havePreview: true,\n              resultPreviewFlag: true,\n              formData\n            })\n          })\n        }\n\n        if (isWeiXin()) {\n          if (this.state.wxAudioLocalId) {\n            wx.uploadVoice({\n              localId: this.state.wxAudioLocalId, // 需要上传的音频的本地ID，由stopRecord接口获得\n              isShowProgressTips: 1, // 默认为1，显示进度提示\n              success: (res) => {\n                values.wx_audio = res.serverId; // 返回音频的服务器端ID\n                values.audio = 0\n                func(values)\n              },\n              fail: (res) => {\n                this.setState({ uploadModal: true })\n              }\n            });\n          } else {\n            values.audio = 0\n            func(values)\n          }\n        }\n\n      } else {\n        for (let x in errors) {\n          let error = errors[x];\n          Toast.info(error.errors[0].message, 1)\n          return\n        }\n      }\n    });\n  }\n\n  returnEdit = () => {\n    cacheData.returnUpdate = true;\n    this.setState({\n      returnUpdate: true,\n      resultPreviewFlag: false\n    })\n  }\n\n  getCodeUrl = () => {\n    if (!this.codeLock) {\n      this.codeLock = true;\n      getCodeUrl().then(res => {\n        this.codeLock = false\n        this.setState({\n          formData: Object.assign({}, this.state.formData, { captcha_url: res.img }),\n          codeKey: res.key\n        })\n      }).catch(e => {\n        this.codeLock = false\n      })\n    }\n  }\n\n  setImageFile = (files, data) => {\n    let imgFileId = null\n    if (data) {\n      imgFileId = data.id\n    }\n    this.setState({\n      formData: Object.assign({}, this.state.formData, { files }),\n      imgFileId\n    })\n  }\n\n  setAudioUrl = (blob, type) => {\n    if (type == 'wx') {\n      this.setState({\n        wxAudioLocalId: blob\n      })\n    } else {\n      if (blob) {\n        this.setState({\n          audioBlod: blob,\n          audioUrl: URL.createObjectURL(blob)\n        })\n      }\n    }\n\n  }\n\n  render() {\n    let { previewFlag, previewImgArr, previewImgIndex, bgUrl, resultPreviewFlag, formData, havePreview, returnUpdate, haveCommit } = this.state\n    return (\n      <div className=\"write-wrap\">\n        <Modal\n          className='upload-modal'\n          visible={this.state.uploadModal}\n          transparent\n          maskClosable={false}\n          onClose={() => { }}\n          title=\"语音上传失败\"\n          footer={[{ text: '确定', onPress: () => { this.setState({ uploadModal: false }) } }]}\n        >\n          <div>\n            请检查您的微信版本并升级至最新\n          </div>\n        </Modal>\n        {\n          previewFlag ? <WxImageViewer onClose={this.previewClose} urls={previewImgArr} index={previewImgIndex} /> : null\n        }\n        <div><img className=\"top-bg\" src={bgUrl}></img></div>\n        <div className=\"main\">\n          {\n            resultPreviewFlag ? <PreviewForm previewImg={this.previewImg} formData={formData}></PreviewForm> : <WriteForm formData={formData} previewImg={this.previewImg} setImageFile={this.setImageFile} getCodeUrl={this.getCodeUrl} setAudioUrl={this.setAudioUrl} previwe wrappedComponentRef={(form) => this.writeForm = form}></WriteForm>\n          }\n        </div>\n        <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br />互联网ICP备案：粤ICP备14040574号-1  </div>\n        <div className=\"fixed-bottom\">\n          {\n            resultPreviewFlag ? <div className=\"wrap\">\n              <Button className={returnUpdate ? 'visited' : ''} onClick={this.returnEdit}>返回修改</Button>\n              <Button className={haveCommit ? 'visited' : ''} onClick={this.formSubmit}>确认提交</Button>\n            </div> : <Button className={havePreview ? 'visited' : ''} onClick={this.previewResult}>预览</Button>\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default WriteSecre","import React from 'react'\nimport { Modal, InputItem, Toast, Button } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport { getSecret, getBgUrl } from '@/api'\nimport WxImageViewer from 'react-wx-images-viewer';\nimport { staticHost2ApiHost } from '@/utils/env'\nimport PreviewForm from './components/previewForm'\nimport { isWeiXin } from '../../utils/util';\nimport check_bg_top from '../../assets/images/check_top_bg.jpg'\nimport { cacheData } from './cache'\n// import { Base64 } from 'js-base64';\n\nconst wx = window.wx\nclass CheckSecre extends React.Component {\n  state = {\n    check_status: 'off',\n    audioUrl: '',\n    audioStatus: 0,\n    secretInfo: {},\n    previewFlag: false,\n    previewImgArr: [],\n    previewImgIndex: 0,\n    bgUrl: ''\n  }\n\n  componentWillMount() {\n\n  }\n\n  getBgUrl = () => {\n    getBgUrl().then(res => {\n      let data = res.data;\n      if (data && data.length != 0) {\n        let bgUrl = staticHost2ApiHost() + data[0].rel_image.path;\n        sessionStorage.setItem('check_top_bg', bgUrl)\n        this.setState({\n          bgUrl\n        })\n      }\n    })\n  }\n\n  getInfo(phone) {\n    getSecret(phone).then(res => {\n      let data = res.data;\n      // if(data.username){\n      //   data.username = Base64.decode(data.username);\n      // }\n      // data.say_to_you = Base64.decode(data.say_to_you);\n      if (data.rel_audio) {\n        data.audioUrl = staticHost2ApiHost() + data.rel_audio.path\n      }\n      if (data.rel_thumb) {\n        data.files = [{ url: staticHost2ApiHost() + data.rel_thumb.path }]\n      }\n      if (data.rel_audio) {\n        cacheData.secretInfo = data;\n        sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n        setTimeout(() => {\n          this.props.history.push('/powerionics/checkDetail')\n        }, 100)\n      } else {\n        if (isWeiXin()) {\n          if (data.wx_audio) {\n            wx.downloadVoice({\n              serverId: data.wx_audio, // 需要下载的音频的服务器端ID，由uploadVoice接口获得\n              isShowProgressTips: 1, // 默认为1，显示进度提示\n              success: (res) => {\n                data.wxAudioLocalId = res.localId\n                cacheData.secretInfo = data;\n                sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n                setTimeout(() => {\n                  this.props.history.push('/powerionics/checkDetail')\n                }, 100)\n              },\n              fail: (e) => {\n                // alert(JSON.stringify(e))\n                // if (e.errMsg == 'downloadVoice:the permission value is offline verifying') {\n                  data.wxAudioLocalId = null\n                  cacheData.secretInfo = data;\n                  sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n                  setTimeout(() => {\n                    this.props.history.push('/powerionics/checkDetail')\n                  }, 100)\n                // } else {\n                //   this.setState({\n                //     uploadModal: true\n                //   })\n                // }\n\n              }\n            });\n          } else {\n            cacheData.secretInfo = data;\n            sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n            setTimeout(() => {\n              this.props.history.push('/powerionics/checkDetail')\n            }, 100)\n            // this.setState({\n            //   check_status: 'on',\n            //   secretInfo: data\n            // })\n          }\n        } else {\n          cacheData.secretInfo = data;\n          sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n          setTimeout(() => {\n            this.props.history.push('/powerionics/checkDetail')\n          }, 100)\n          // this.setState({\n          //   check_status: 'on',\n          //   secretInfo: data\n          // })\n        }\n      }\n    }).catch(e => {\n      if (e.code == 10000) {\n        Toast.info(e.msg + ':' + e.data, 2)\n      } else if (e.code == 20111) {\n        this.setState({\n          checkModal: true\n        })\n        // Toast.info('此手机号码暂未提交留言，请您与填卡人确认并核对手机号码是否正确！',2)\n      } else {\n        Toast.info(e.msg, 2)\n      }\n    })\n  }\n\n  onSubmit = () => {\n    this.props.form.validateFields({ force: true }, (errors, values) => {\n      if (!errors) {\n        // this.setState({\n        //   check_status: 'on'\n        // })\n        values.phone = values.phone.toString().replace(/\\s*/g, '')\n        this.getInfo(values.phone)\n      } else {\n        for (let x in errors) {\n          let error = errors[x];\n          Toast.info(error.errors[0].message)\n          return\n        }\n      }\n    });\n  }\n\n\n  previewImg = (url) => {\n    this.setState({\n      previewFlag: true,\n      previewImgArr: [url],\n      previewImgIndex: 0\n    })\n  }\n\n  previewClose = () => {\n    this.setState({\n      previewFlag: false\n    })\n  }\n\n  gotoHelpCenter = () => {\n    this.props.history.push('/helpCenter')\n  }\n\n  render() {\n    let { check_status, secretInfo, previewFlag, previewImgArr, previewImgIndex, bgUrl } = this.state;\n    const { getFieldProps } = this.props.form;\n    return (\n      <div className=\"secret-check-wrap\">\n        <Modal\n          className='upload-modal'\n          visible={this.state.uploadModal}\n          transparent\n          maskClosable={false}\n          onClose={() => { }}\n          title=\"语音上传失败\"\n          footer={[{ text: '确定', onPress: () => { this.setState({ uploadModal: false }) } }]}\n        >\n          <div>\n            请检查您的微信版本并升级至最新\n          </div>\n        </Modal>\n        <Modal\n          className='check-modal'\n          visible={this.state.checkModal}\n          transparent\n          maskClosable={false}\n          onClose={() => { }}\n          footer={[{ text: '确定', onPress: () => { this.setState({ checkModal: false }) } }]}\n        >\n          <div>\n            此手机号码暂未提交留言，请您与填卡人确认并核对手机号码是否正确！\n          </div>\n        </Modal>\n        {\n          previewFlag ? <WxImageViewer onClose={this.previewClose} urls={previewImgArr} index={previewImgIndex} /> : null\n        }\n        {\n          check_status === 'off' ? <div className=\"secret-check-form-wrap\">\n            <div className=\"top\">\n              <img src={check_bg_top}></img>\n            </div>\n            <div className=\"main\">\n              <div className=\"tip\">\n                <p>您的朋友随礼物还给您留了一段私言密语，您的手机号是查询留言的密码！</p>\n                <p>请输入您的手机号码查看TA为您留下的私言密语......</p>\n              </div>\n              <form className=\"secret-check-form\">\n                <div className=\"label\">输入你的手机号码</div>\n                <InputItem\n                  type=\"phone\"\n                  {...getFieldProps('phone', {\n                    initialValue: this.state.phone,\n                    rules: [\n                      { required: true, message: '请输入手机号码' },\n                    ],\n                  })}\n                ></InputItem>\n                <Button className=\"search-btn\" size=\"small\" onClick={this.onSubmit}>查看</Button>\n              </form>\n            </div>\n          </div> : <div className=\"result\">\n              <div className=\"top\"><img src={bgUrl}></img></div>\n              <PreviewForm previewImg={this.previewImg} formData={secretInfo}></PreviewForm>\n              <div className=\"fixed-bottom\">\n                <a className=\"url-btn\" href=\"//powerionics.jd.com\">我也要挑选礼物送TA</a>\n                <span onClick={this.gotoHelpCenter} className=\"help-center\">帮助中心</span>\n              </div>\n            </div>\n        }\n\n        <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br />互联网ICP备案：粤ICP备14040574号-1  </div>\n      </div>\n    )\n  }\n}\n\n\nexport default createForm()(CheckSecre)","import React from 'react'\nimport { InputItem, Toast, Button } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport { getSecret, getBgUrl } from '@/api'\nimport WxImageViewer from 'react-wx-images-viewer';\nimport { staticHost2ApiHost } from '@/utils/env'\nimport PreviewForm from './components/previewForm'\nimport { isWeiXin } from '../../utils/util';\nimport check_bg_top from '../../assets/images/check_top_bg.jpg'\nimport { cacheData } from './cache'\nimport { Base64 } from 'js-base64';\n\nconst wx = window.wx\nclass CheckSecre extends React.Component {\n  state = {\n    check_status: 'off',\n    audioUrl: '',\n    audioStatus: 0,\n    secretInfo: null,\n    previewFlag: false,\n    previewImgArr: [],\n    previewImgIndex: 0,\n    bgUrl: ''\n  }\n\n  componentWillMount() {\n    if (sessionStorage.getItem('check_top_bg')) {\n      this.setState({\n        bgUrl: sessionStorage.getItem('check_top_bg')\n      })\n    } else {\n      this.getBgUrl()\n    }\n    if (cacheData.secretInfo || sessionStorage.getItem(\"secretInfo\")) {\n      let secretInfo = cacheData.secretInfo || JSON.parse(sessionStorage.getItem(\"secretInfo\"));\n      this.setState({\n        check_status: 'on',\n        secretInfo\n      })\n    } else {\n      this.props.history.replace('/powerionics/check')\n    }\n  }\n\n  getBgUrl = () => {\n    getBgUrl().then(res => {\n      let data = res.data;\n      if (data && data.length != 0) {\n        let bgUrl = staticHost2ApiHost() + data[0].rel_image.path;\n        sessionStorage.setItem('check_top_bg', bgUrl)\n        this.setState({\n          bgUrl\n        })\n      }\n    })\n  }\n\n  getInfo(phone) {\n    getSecret(phone).then(res => {\n      let data = res.data;\n      if(data.username){\n        data.username = Base64.decode(data.username);\n      }\n      data.say_to_you = Base64.decode(data.say_to_you);\n      if (data.rel_audio) {\n        data.audioUrl = staticHost2ApiHost() + data.rel_audio.path\n      }\n      if (data.rel_thumb) {\n        data.files = [{ url: staticHost2ApiHost() + data.rel_thumb.path }]\n      }\n      if (isWeiXin()) {\n        if (data.wx_audio) {\n          wx.downloadVoice({\n            serverId: data.wx_audio, // 需要下载的音频的服务器端ID，由uploadVoice接口获得\n            isShowProgressTips: 1, // 默认为1，显示进度提示\n            success: (res) => {\n              data.wxAudioLocalId = res.localId\n              sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n              this.setState({\n                check_status: 'on',\n                secretInfo: data\n              })\n            },\n            fail: (e) => {\n            }\n          });\n        } else {\n          sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n          this.setState({\n            check_status: 'on',\n            secretInfo: data\n          })\n        }\n      } else {\n        sessionStorage.setItem(\"secretInfo\", JSON.stringify(data));\n        this.setState({\n          check_status: 'on',\n          secretInfo: data\n        })\n      }\n    })\n  }\n\n  onSubmit = () => {\n    this.props.form.validateFields({ force: true }, (errors, values) => {\n      if (!errors) {\n        // this.setState({\n        //   check_status: 'on'\n        // })\n        values.phone = values.phone.toString().replace(/\\s*/g, '')\n        this.getInfo(values.phone)\n      } else {\n        for (let x in errors) {\n          let error = errors[x];\n          Toast.info(error.errors[0].message)\n          return\n        }\n      }\n    });\n  }\n\n\n  previewImg = (url) => {\n    this.setState({\n      previewFlag: true,\n      previewImgArr: [url],\n      previewImgIndex: 0\n    })\n  }\n\n  previewClose = () => {\n    this.setState({\n      previewFlag: false\n    })\n  }\n\n  gotoHelpCenter = () => {\n    this.props.history.push('/helpCenter')\n  }\n\n  render() {\n    let { check_status, secretInfo, previewFlag, previewImgArr, previewImgIndex, bgUrl } = this.state;\n    const { getFieldProps } = this.props.form;\n    return (\n      <div className=\"secret-check-wrap result-wrap\">\n        {\n          previewFlag ? <WxImageViewer onClose={this.previewClose} urls={previewImgArr} index={previewImgIndex} /> : null\n        }\n        {\n          secretInfo ? <div className=\"result\">\n            <div className=\"top\"><img src={bgUrl}></img></div>\n            <PreviewForm previewImg={this.previewImg} formData={secretInfo}></PreviewForm>\n            <div className=\"fixed-bottom\">\n              <a className=\"url-btn\" href=\"//powerionics.jd.com\">我也要挑选礼物送TA</a>\n              <span onClick={this.gotoHelpCenter} className=\"help-center\">帮助中心</span>\n            </div>\n          </div> : null\n        }\n        <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br/>互联网ICP备案：粤ICP备14040574号-1  </div>\n      </div>\n    )\n  }\n}\n\n\nexport default createForm()(CheckSecre)","import React from 'react'\nimport helpImage from '../../assets/images/help_center.png'\nimport './styles/helpCenter.scss'\n\nclass HelpCenter extends React.Component {\n\n  render() {\n      return <div className=\"helpCenter\">\n          <img src={helpImage}></img>\n          <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br/>互联网ICP备案：粤ICP备14040574号-1  </div>\n      </div>\n  }\n}\nexport default HelpCenter","import React from 'react'\nimport { Result, Icon } from 'antd-mobile';\nimport qrcode from '../../assets/images/qrcode.jpg'\nimport './styles/success.scss'\n\nclass Success extends React.Component {\n  render() {\n    return <div className=\"success-wrap\">\n\n      <Result\n        img={<Icon type=\"check-circle\" className=\"spe\" style={{ fill: '#d2b78c' }} />}\n        title=\"提交成功\"\n        message=\"\"\n      />\n      {/* <div className=\"warn-tip\">\n        亲，若您忘记在天猫或京东订单备注“私言密语”，请务必及时用旺旺或叮咚联系在线客服备注！\n      </div> */}\n\n      \n      <div className=\"qr-wrap\">\n        <p className=\"tip\">长按识别图点二维码关注公众号</p>\n        <img className=\"qr-code\" src={qrcode}></img>\n        <p className=\"name\">powerionics旗舰店，更多精彩活动等着您！</p>\n      </div>\n\n      <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br/>互联网ICP备案：粤ICP备14040574号-1  </div>\n    </div>\n  }\n}\nexport default Success","import React from 'react'\nimport { createForm } from 'rc-form';\nimport { List } from 'antd-mobile';\nimport {staticHost2ApiHost} from '@/utils/env'\nconst wx = window.wx\nclass PreviewForm extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            disabled: true,\n            files: [],\n            imgFileId: null,\n            recorder: null,\n            audioPlayStatus: 0,\n            previewFlag: false,\n            previewImgArr: [],\n            previewImgIndex: 0,\n            codeUrl: '',\n        }\n    }\n\n    getAudioLinkStatus() {\n        let { wx_audio_link, wxAudioLocalId } = this.props.formData;\n        if (wx_audio_link) {\n            return 2\n        } else if (wxAudioLocalId) {\n            return 1\n        } else {\n            return 0\n        }\n    }\n\n    componentDidMount() {\n        this.addAudioListenner()\n    }\n\n    addAudioListenner() {\n        let audioLinkStatus = this.getAudioLinkStatus();\n        if (audioLinkStatus == 1) {\n            wx.onVoicePlayEnd({\n                success: (res) => {\n                    // wx.stopVoice({\n                    //     localId: res.localId,\n                    // });\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }\n            });\n        } else if (audioLinkStatus == 2) {\n            let audio = document.getElementById('my_audio')\n            if (audio) {\n                audio.addEventListener('ended', () => {\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }, false)\n            }\n        }\n    }\n\n    playCommonAudio = () => {\n        let audio = document.getElementById('my_audio')\n        audio.volume = 1;\n        let { audioPlayStatus } = this.state\n        if (audioPlayStatus == 0) {\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        } else if (audioPlayStatus == 1) {\n            this.setState({\n                audioPlayStatus: 0\n            })\n            audio.pause()\n        } else if (audioPlayStatus == 2) {\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        } else if (audioPlayStatus == 3) {\n            audio.play()\n            this.setState({\n                audioPlayStatus: 1\n            })\n        }\n    }\n\n    playWxAudio = () => {\n        let { wxAudioLocalId } = this.props.formData\n        let { audioPlayStatus } = this.state;\n        if (audioPlayStatus == 0) {\n            wx.playVoice({\n                localId: wxAudioLocalId,\n                success: () => {\n                    this.setState({\n                        audioPlayStatus: 1\n                    })\n                }\n            });\n\n        } else {\n            wx.pauseVoice({\n                localId: wxAudioLocalId,\n                success: () => {\n                    this.setState({\n                        audioPlayStatus: 0\n                    })\n                }\n            });\n        }\n\n    }\n\n    playAudio = () => {\n        if (this.getAudioLinkStatus() == 1) {\n            this.playWxAudio()\n        } else {\n            this.addAudioListenner()\n            this.playCommonAudio()\n        }\n    }\n\n    render() {\n        let { audioPlayStatus } = this.state;\n        let { wx_audio_link } = this.props.formData;\n        let audioLinkStatus = this.getAudioLinkStatus()\n        return (\n            <form className=\"my-form preview-form\">\n                <List className=\"audio-list\" renderHeader={() => {\n                    return (\n                        <div>\n                            <p className=\"label\">我想对您说：</p>\n                        </div>\n                    )\n                }}>\n                    <div>\n                        {\n                            audioLinkStatus != 0 ? <div className=\"audio-wrap\">\n                                <p onClick={this.playAudio} className={(audioPlayStatus == 1 ? 'btn end' : 'btn start')}></p>\n                                {audioLinkStatus == 2 ? <audio id=\"my_audio\" src={staticHost2ApiHost()+wx_audio_link}></audio> : null}\n                            </div> : null\n                        }\n                    </div>\n                </List>\n            </form>\n        )\n    }\n}\n\n\nexport default createForm()(PreviewForm)","import React from 'react'\nimport { Modal, List, InputItem, Toast, ImagePicker, TextareaItem, Button } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport Recorder from '@/utils/recorder';\nimport { setLocal, removeLocal, isWeiXin } from '@/utils/util'\nimport { uploadImage } from '@/api'\nconst alert = Modal.alert;\nconst wx = window.wx;\nclass WriteForm extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            recorder: null,\n            audioStatus: 0,\n            time: 0,\n            limitTime: 30,\n        }\n    }\n\n    componentWillMount() {\n        clearTimeout(this.timer)\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.timer)\n    }\n\n    startUserMedia(audio_context, stream, callback) {\n        let input = audio_context.createMediaStreamSource(stream);\n        this.setState({\n            recorder: new Recorder(input)\n        }, () => {\n            callback && callback()\n        })\n    }\n\n    stopRecording() {\n        let { recorder } = this.state;\n        recorder.stop();\n        recorder.exportWAV((blob) => {\n            this.props.setAudioUrl(blob)\n            this.setState({\n                audioStatus: 0\n            })\n        });\n        recorder.clear();\n    }\n\n    wxRecord() {\n        let { audioStatus, time, limitTime } = this.state;\n        clearTimeout(this.timer)\n        // if (time >= limitTime) {\n        //     alert('', `您的录音已经超过${limitTime}秒，是否重新录制？`, [\n        //         { text: '否', onPress: () => {}},\n        //         {\n        //             text: '是', onPress: () => {\n        //                 this.setState({\n        //                     time: 0\n        //                 }, () => {\n        //                     this.wxRecord()\n        //                 })\n        //             }\n        //         },\n        //     ])\n        // } else {\n        if (audioStatus == 0 || audioStatus == 2) {\n            wx.startRecord({\n                success: () => {\n                    this.setState({\n                        audioStatus: 1,\n                        startAudio: true,\n                        time: 0\n                    })\n                    clearTimeout(this.timer)\n                    this.timer = setInterval(() => {\n                        this.setState({\n                            time: this.state.time + 1\n                        }, () => {\n                            if (this.state.time >= this.state.limitTime) {\n                                clearInterval(this.timer);\n                                wx.stopRecord({\n                                    success: (res) => {\n                                        this.setState({\n                                            audioStatus: 0\n                                        })\n                                        this.props.setAudioUrl(res.localId, 'wx')\n                                    }\n                                })\n                            }\n                        })\n                    }, 1000)\n                }\n            })\n\n        } else {\n            clearTimeout(this.timer)\n            wx.stopRecord({\n                success: (res) => {\n                    this.setState({\n                        audioStatus: 0\n                    })\n                    this.props.setAudioUrl(res.localId, 'wx')\n                },\n                fail: (e) => {\n                }\n            })\n        }\n        // }\n    }\n\n    comonRecord = () => {\n        let { audioStatus, recorder } = this.state;\n        clearTimeout(this.timer)\n        // return false;\n        const func = () => {\n            let { audioStatus, recorder } = this.state;\n            if (audioStatus == 0 || audioStatus == 2) {\n                this.setState({\n                    audioStatus: 1,\n                    time: 0,\n                    startAudio: true\n                })\n                recorder.record();\n                clearTimeout(this.timer)\n                this.timer = setInterval(() => {\n                    this.setState({\n                        time: this.state.time + 1\n                    }, () => {\n                        if (this.state.time >= this.state.limitTime) {\n                            clearInterval(this.timer);\n                            this.stopRecording()\n                        }\n                    })\n                }, 1000)\n            } else if (audioStatus == 1) {\n                this.stopRecording()\n            }\n        }\n        if (this.state.time >= this.state.limitTime) {\n\n            alert('', `您的录音已经超过${this.state.limitTime}秒，是否重新录制？`, [\n                { text: '否', onPress: () => { } },\n                {\n                    text: '是', onPress: () => {\n                        this.setState({\n                            time: 0\n                        }, () => {\n                            recorder.clear();\n                            this.record()\n                        })\n                    }\n                },\n            ])\n\n        } else {\n            if (audioStatus == 0 && !recorder) {\n                let audio_context = null\n                try {\n                    // webkit shim\n                    window.AudioContext = window.AudioContext || window.webkitAudioContext;\n                    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n                    window.URL = window.URL || window.webkitURL;\n\n                    audio_context = new AudioContext;\n                    navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {\n                        removeLocal('_secret_')\n                        this.startUserMedia(audio_context, stream, func)\n                    }).catch(e => {\n                        setLocal('_secret_', JSON.stringify(this.props.form.getFieldsValue()))\n                        window.location.reload();\n                    });\n                } catch (e) {\n                    Toast.info('该浏览器不支持录音,请用其他浏览器或者微信打开')\n                }\n\n            } else {\n                func()\n            }\n        }\n    }\n\n    record = () => {\n        if (isWeiXin()) {\n            this.wxRecord()\n        } else {\n            this.comonRecord()\n        }\n    }\n\n    onChange = (files, type, index) => {\n        if (files.length != 0) {\n            let file = files[0].file;\n            let formData = new FormData();\n            formData.append('upfile', file)\n            uploadImage(formData).then(data => {\n                this.props.setImageFile(files, data)\n            })\n        } else {\n            this.props.setImageFile(files)\n\n        }\n    }\n\n    render() {\n        let { audioStatus, time,limitTime } = this.state\n\n        const filterTime = (time) => {\n            if (time < 10) {\n                time = '0' + time\n            }\n            return time\n        }\n\n        return (\n            <form className=\"my-form wirte-form\">\n                <List className=\"audio-list\" renderHeader={() => {\n                    return (\n                        <div className=\"audio-label-wrap\">\n                            <p className=\"label\">我想对您说：</p>\n                            <p>可选项,录制您想对TA说的话,限{limitTime}秒内!</p>\n                            {\n                                audioStatus == 1 ? <p className=\"tip\">录音中 00:{filterTime(time)}</p> : (this.state.startAudio ? <p className=\"tip\">已录音 00:{filterTime(time)}</p> : null)\n                            }\n                        </div>\n                    )\n                }}>\n                    <div className=\"audio-wrap\">\n                        <p onClick={this.record} className={audioStatus == 0 ? 'btn start' : 'btn pause'}></p>\n                    </div>\n                </List>\n            </form>\n        )\n    }\n}\n\n\nexport default createForm()(WriteForm)","import React from 'react'\nimport { Modal, InputItem, Toast, Button } from 'antd-mobile';\nimport { createForm } from 'rc-form';\nimport { staticHost2ApiHost } from '@/utils/env'\nimport PreviewForm from './components/previewRecordForm'\nimport check_bg_top from '../../assets/images/check_top_bg.jpg'\nimport { cacheData } from './cache'\nimport { getLocal, removeLocal, parseTime, queryUrlParam, isWeiXin } from '@/utils/util'\nimport { updateRecord, uploadAudio, getBgUrl, valid, getSecret } from '@/api'\nimport WriteForm from './components/recordForm'\n// import { Base64 } from 'js-base64';\n\nconst wx = window.wx\nclass CheckSecre extends React.Component {\n  state = {\n    check_status: 'off',\n    audioUrl: '',\n    audioStatus: 0,\n    secretInfo: {},\n    previewFlag: false,\n    previewImgArr: [],\n    previewImgIndex: 0,\n    bgUrl: '',\n    flag:false\n  }\n\n  componentWillMount() {\n    this.getBgUrl()\n  }\n\n  getBgUrl = () => {\n    getBgUrl().then(res => {\n      let data = res.data;\n      if (data && data.length != 0) {\n        let bgUrl = staticHost2ApiHost() + data[0].rel_image.path;\n        sessionStorage.setItem('check_top_bg', bgUrl)\n        this.setState({\n          bgUrl\n        })\n      }\n    })\n  }\n\n  getInfo(phone) {\n    getSecret(phone).then(res => {\n      let recordId = res.data && res.data.id\n      this.setState({\n        recordId,\n        flag:true\n      })\n    }).catch(e => {\n      if (e.code == 10000) {\n        Toast.info(e.msg + ':' + e.data, 2)\n      } else if (e.code == 20111) {\n        this.setState({\n          checkModal: true\n        })\n        // Toast.info('此手机号码暂未提交留言，请您与填卡人确认并核对手机号码是否正确！',2)\n      } else {\n        Toast.info(e.msg, 2)\n      }\n    })\n  }\n\n  onSubmit = () => {\n    this.props.form.validateFields({ force: true }, (errors, values) => {\n      if (!errors) {\n        // this.setState({\n        //   check_status: 'on'\n        // })\n        values.phone = values.phone.toString().replace(/\\s*/g, '')\n        this.getInfo(values.phone)\n      } else {\n        for (let x in errors) {\n          let error = errors[x];\n          Toast.info(error.errors[0].message)\n          return\n        }\n      }\n    });\n  }\n\n\n  previewImg = (url) => {\n    this.setState({\n      previewFlag: true,\n      previewImgArr: [url],\n      previewImgIndex: 0\n    })\n  }\n\n  previewClose = () => {\n    this.setState({\n      previewFlag: false\n    })\n  }\n\n  gotoHelpCenter = () => {\n    this.props.history.push('/helpCenter')\n  }\n\n  formSubmit = () => {\n    let values = {\n      id:this.state.recordId,\n      audio:0,\n    };\n\n    let func = (values) => {\n      cacheData.haveCommit = true;\n      this.setState({\n        haveCommit: true\n      })\n      updateRecord(this.state.recordId,values).then(res => {\n        this.props.history.push(`/success`)\n      })\n    }\n\n    if (isWeiXin()) {\n      if (this.state.wxAudioLocalId) {\n        wx.uploadVoice({\n          localId: this.state.wxAudioLocalId, // 需要上传的音频的本地ID，由stopRecord接口获得\n          isShowProgressTips: 1, // 默认为1，显示进度提示\n          success: (res) => {\n            values.wx_audio = res.serverId; // 返回音频的服务器端ID\n            func(values)\n          },\n          fail: (res) => {\n            this.setState({ uploadModal: true })\n          }\n        });\n      } else {\n        func(values)\n      }\n    } else {\n      if (this.state.audioBlod) {\n        let formData = new FormData();\n        formData.append('upfile', this.state.audioBlod, 'test.wav')\n        uploadAudio(formData).then(data => {\n          values.audio = data.id\n          func(values)\n        })\n      } else {\n        values.audio = 0\n        func(values)\n      }\n    }\n\n\n  }\n\n  previewResult = () => {\n    this.writeForm.props.form.validateFields({ force: true }, (errors, values) => {\n      if (!errors) {\n        // values = Object.assign({}, this.state.formData);\n        let formData = Object.assign({}, this.state.formData, {audioUrl: this.state.audioUrl, wxAudioLocalId: this.state.wxAudioLocalId })\n\n        let func = (values) => {\n            cacheData.formData = formData\n            this.setState({\n              havePreview: true,\n              resultPreviewFlag: true,\n              formData\n            })\n        }\n\n        if (isWeiXin()) {\n          if (this.state.wxAudioLocalId) {\n            wx.uploadVoice({\n              localId: this.state.wxAudioLocalId, // 需要上传的音频的本地ID，由stopRecord接口获得\n              isShowProgressTips: 1, // 默认为1，显示进度提示\n              success: (res) => {\n                values.wx_audio = res.serverId; // 返回音频的服务器端ID\n                values.audio = 0\n                func(values)\n              },\n              fail: (res) => {\n                this.setState({ uploadModal: true })\n              }\n            });\n          } else {\n            values.audio = 0\n            func(values)\n          }\n        }\n\n      } else {\n        for (let x in errors) {\n          let error = errors[x];\n          Toast.info(error.errors[0].message, 1)\n          return\n        }\n      }\n    });\n  }\n\n  returnEdit = () => {\n    cacheData.returnUpdate = true;\n    this.setState({\n      returnUpdate: true,\n      resultPreviewFlag: false\n    })\n  }\n\n  setImageFile = (files, data) => {\n    let imgFileId = null\n    if (data) {\n      imgFileId = data.id\n    }\n    this.setState({\n      formData: Object.assign({}, this.state.formData, { files }),\n      imgFileId\n    })\n  }\n\n  setAudioUrl = (blob, type) => {\n    if (type == 'wx') {\n      this.setState({\n        wxAudioLocalId: blob\n      })\n    } else {\n      if (blob) {\n        this.setState({\n          audioBlod: blob,\n          audioUrl: URL.createObjectURL(blob)\n        })\n      }\n    }\n\n  }\n\n  render() {\n    let { check_status, secretInfo, flag, previewFlag, previewImgArr, previewImgIndex, bgUrl, resultPreviewFlag, formData, havePreview, returnUpdate, haveCommit } = this.state;\n    const { getFieldProps } = this.props.form;\n    return <div>\n      {\n        flag ? <div className=\"write-wrap\">\n          <Modal\n            className='upload-modal'\n            visible={this.state.uploadModal}\n            transparent\n            maskClosable={false}\n            onClose={() => { }}\n            title=\"语音上传失败\"\n            footer={[{ text: '确定', onPress: () => { this.setState({ uploadModal: false }) } }]}\n          >\n            <div>\n              请检查您的微信版本并升级至最新\n          </div>\n          </Modal>\n          <div><img className=\"top-bg\" src={bgUrl}></img></div>\n          <div className=\"main\">\n            {\n              resultPreviewFlag ? <PreviewForm previewImg={this.previewImg} formData={formData}></PreviewForm> : <WriteForm formData={formData} previewImg={this.previewImg} setImageFile={this.setImageFile} getCodeUrl={this.getCodeUrl} setAudioUrl={this.setAudioUrl} previwe wrappedComponentRef={(form) => this.writeForm = form}></WriteForm>\n            }\n          </div>\n          <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br />互联网ICP备案：粤ICP备14040574号-1  </div>\n          <div className=\"fixed-bottom\">\n            {\n              resultPreviewFlag ? <div className=\"wrap\">\n                <Button className={returnUpdate ? 'visited' : ''} onClick={this.returnEdit}>返回修改</Button>\n                <Button className={haveCommit ? 'visited' : ''} onClick={this.formSubmit}>确认提交</Button>\n              </div> : <Button className={havePreview ? 'visited' : ''} onClick={this.previewResult}>预览</Button>\n            }\n          </div>\n        </div> : <div className=\"secret-check-wrap\">\n            <Modal\n              className='check-modal'\n              visible={this.state.checkModal}\n              transparent\n              maskClosable={false}\n              onClose={() => { }}\n              footer={[{ text: '确定', onPress: () => { this.setState({ checkModal: false }) } }]}\n            >\n              <div>\n                此手机号码暂未提交留言，请您与填卡人确认并核对手机号码是否正确！\n          </div>\n            </Modal>\n            <div className=\"secret-check-form-wrap\">\n              <div className=\"top\">\n                <img src={check_bg_top}></img>\n              </div>\n              <div className=\"main\">\n                <div className=\"tip\">\n                  <p>请输入原先填写的收卡人手机号码</p>\n                </div>\n                <form className=\"secret-check-form\">\n                  <div className=\"label\">请输入原先填写的收卡人手机号码</div>\n                  <InputItem\n                    type=\"phone\"\n                    {...getFieldProps('phone', {\n                      initialValue: this.state.phone,\n                      rules: [\n                        { required: true, message: '请输入手机号码' },\n                      ],\n                    })}\n                  ></InputItem>\n                  <Button className=\"search-btn\" size=\"small\" onClick={this.onSubmit}>确定</Button>\n                </form>\n              </div>\n            </div>\n            <div className=\"footer-record\">©2009-2019 深圳市史摩斯贸易有限公司 版权所有<br />互联网ICP备案：粤ICP备14040574号-1  </div>\n          </div>\n      }\n    </div>\n\n\n  }\n}\n\n\nexport default createForm()(CheckSecre)","import layout from '../view/secret/components/layout'\nimport writeSecret from '../view/secret/write'\nimport checkSecret from '../view/secret/check'\nimport checkSecretDetail from '../view/secret/check_detail'\nimport helpCenter from '../view/secret/helpCenter'\nimport success from '../view/secret/success'\nimport record from '../view/secret/record'\nconst routes = [\n    {\n        path: '/',\n        redirect: '/powerionics/write',\n        exact:true\n    },\n    {\n        path: '/helpCenter',\n        component: helpCenter,//帮助中心\n    },\n    {\n        path: '/success',\n        component: success,//提交结果（成功）\n    },\n    {\n        path: '/powerionics',//统一封装处理微信跳转root页面\n        component: layout,\n        routes: [\n            {\n                path: '/powerionics/write',//表单提交\n                component: writeSecret\n            },\n            {\n                path: '/powerionics/record',//重新录音\n                component: record\n            },\n            {\n                path: '/powerionics/check',//查看表单\n                component: checkSecret\n            },\n            {\n                path: '/powerionics/checkDetail',//表单详情\n                component: checkSecretDetail\n            }\n        ]\n    }\n]\n\nexport default routes\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { getWxConfig } from '@/api';\nexport function initWxConfig(config) {\n    let url = window.location.href.split('#')[0]\n    getWxConfig(url).then(res => {\n        let {\n            appId,\n            timestamp,\n            nonceStr,\n            signature,\n        } = res.data;\n        window.wx.config({\n            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\n            appId,\n            timestamp,\n            nonceStr,\n            signature,\n            jsApiList: ['translateVoice', 'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'playVoice', 'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice'], // 必填，需要使用的JS接口列表\n        });\n    })\n}","import React from 'react'\nimport ReactDom from 'react-dom'\nimport { HashRouter as Router, Route,Redirect } from 'react-router-dom'\nimport routes from './routes/index'\nimport * as serviceWorker from './serviceWorker';\nimport { initWxConfig } from '@/utils/wx';\nimport '@/assets/styles/index.scss'\nimport 'lib-flexible/flexible'\n\ninitWxConfig()\n\nReactDom.render((\n    <Router>\n        {\n            routes.map((route, index) => {\n                return <Route key={index} exact={route.exact} path={route.path} render={props => (\n                    route.redirect? <Redirect to={route.redirect}/> :<route.component {...props} routes={route.routes} />\n                )}></Route>\n            })\n        }\n    </Router>\n), document.querySelector('#root'))\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();","module.exports = __webpack_public_path__ + \"static/media/check_top_bg.46ff4ce0.jpg\";"],"sourceRoot":""}